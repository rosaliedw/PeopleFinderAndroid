<link rel="import" href="/includes.html">

<dom-module id="person-details-page">

    <template>
        <style include="custom-styles">
            body {
                @apply --layout-inline;
                @apply --layout-center-center;
                @apply --layout-wrap;
                padding: 40px;
            }

            .blue [slot=header] {
                background-color: var(--paper-light-blue-500);
            }

            paper-header-panel {
                width: 100%;
                height: 100%;
                @apply --shadow-elevation-2dp;
            }

            [slot=header] {
                height: auto;
                font-size: 16px;
                line-height: 60px;
                padding: 0 10px;
                color: white;
                transition: height 0.2s;
            }

            #backbutton {
                position: relative;
                float: left;
                margin-left: 0;
                margin-top: 5px;
            }
        </style>
        <app-location route="{{route}}" query-params="{{queryParams}}"></app-location>
        <app-route route="{{route}}" pattern="/:view/:cn/:uid/:department/:title/:mobile/:mail/:preferredlanguage" data="{{routeData}}"
            tail="{{subroute}}"></app-route>
        <paper-header-panel class="blue">
            <div slot="header">
                <paper-icon-button id="backbutton" icon="icons:arrow-back" on-tap="_goBack"></paper-icon-button>
                <person-header-element cn="[[cn]]" uid="[[uid]]"></person-header-element>
            </div>
        </paper-header-panel>

        <person-function-element class="unselectable" department="[[department]]" title="[[title]]"></person-function-element>
        <preferred-language-element class="unselectable" preferred-language="[[preferredlanguage]]"></preferred-language-element>

        <paper-contact-phone phone-number="[[mobile]]">[[mobile]]</paper-contact-phone>
        <paper-contact-email>[[mail]]</paper-contact-email>

    </template>

    <script>
        class PersonDetailsPage extends Polymer.Element {
            static get is() { return 'person-details-page'; }
            static get properties() {
                return {
                    cn: {
                        type: String
                    },
                    uid: {
                        type: String
                    },
                    department: {
                        type: String
                    },
                    title: {
                        type: String
                    },
                    mobile: {
                        type: String
                    },
                    mail: {
                        type: String
                    },
                    preferredlanguage: {
                        type: String
                    },
                    queryParams: {
                        type: Object,
                        observer: '_routeParamsChanged'
                    }
                }
            }

            _routeParamsChanged(newValue) {
                for (var i in this.queryParams) {
                    this[i] = this.queryParams[i];
                }
            }
            _goBack() {
                this.set('queryParams', {});
                this.set('route.path', '/search/');
            }
        }
        customElements.define(PersonDetailsPage.is, PersonDetailsPage);
    </script>

</dom-module>